<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://raw.githubusercontent.com/arnetworkhouse-oss/tic_tac_toe/main/tic-tac-toe.png" type="image/png">
  <title>Tic-Tac-Toe</title>
  <style>
    :root {
      --bg-color: #0f172a;
      --card-bg: #1e293b;
      --primary: #38bdf8;
      --secondary: #f472b6;
      --accent: #fbbf24;
      --text: #f8fafc;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-color);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center; /* Centers content vertically */
      min-height: 100vh;
      margin: 0;
      padding: 10px;
      box-sizing: border-box;
    }

    h1 {
      font-size: 3rem;
      text-shadow: 0 0 20px rgba(56, 189, 248, 0.5);
      margin-bottom: 20px;
      text-align: center;
    }

    #setup-area, #game-area {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      max-width: 400px;
      width: 100%;
      text-align: center;
      box-sizing: border-box;
    }

    .input-group {
      margin-bottom: 15px;
      text-align: left;
    }

    label { display: block; margin-bottom: 5px; color: var(--primary); }

    input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      background: #334155;
      color: white;
      box-sizing: border-box;
    }

    button {
      background: linear-gradient(135deg, var(--primary), #0ea5e9);
      color: white;
      border: none;
      padding: 12px 25px;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin: 10px 5px;
    }

    button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(56, 189, 248, 0.4); }

    #winner-display {
      font-size: 2rem;
      font-weight: 800;
      color: var(--accent);
      margin: 20px 0;
      display: none;
      animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      text-align: center;
    }

    @keyframes pop {
      0% { transform: scale(0.5); }
      100% { transform: scale(1); }
    }

    #board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 10px;
      justify-content: center;
      margin: 20px auto;
      max-width: 320px;
    }

    .cell {
      aspect-ratio: 1 / 1;
      background: #334155;
      border-radius: 12px;
      font-size: 2.5rem;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.3s;
    }
    .cell.flash {
  animation: flashGlow 0.35s ease-out;
}

.cell.win {
  background: linear-gradient(135deg, var(--accent), #fde68a);
  color: #0f172a;
  box-shadow:
    0 0 30px rgba(251,191,36,1),
    0 0 60px rgba(251,191,36,0.8);
  animation: winGoldPulse 1.3s infinite ease-in-out;
  transform: scale(1.1);
}

@keyframes winGoldPulse {
  0%   { box-shadow: 0 0 22px rgba(251,191,36,0.7); }
  50%  { box-shadow: 0 0 60px rgba(251,191,36,1); }
  100% { box-shadow: 0 0 22px rgba(251,191,36,0.7); }
}


@keyframes flashGlow {
  0% {
    box-shadow: 0 0 0 rgba(56,189,248,0);
    transform: scale(1);
  }
  40% {
    box-shadow: 0 0 35px rgba(56,189,248,1);
    transform: scale(1.05);
  }
  100% {
    box-shadow: 0 0 0 rgba(56,189,248,0);
    transform: scale(1);
  }
}

    .cell:hover { background: #475569; }
    .cell.x { color: var(--primary); }
    .cell.o { color: var(--secondary); }

    #status { font-size: 1.2rem; margin-bottom: 10px; color: var(--accent); }
    #player-bar {
  display: flex;
  justify-content: space-between;
  margin: 15px 0;
  gap: 10px;
}

.player-box {
  width: 48%;
  padding: 10px 5px;
  background: #334155;
  border-radius: 12px;
  font-weight: bold;
  text-align: center;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.4);
  font-size: 0.9rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

#player-left {
  color: var(--primary);
}

#player-right {
  color: var(--secondary);
}

    #reset { background: #ef4444; margin-top: 20px; }

#loader {
  position: fixed;
  inset: 0;
  background: var(--bg-color);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.loader-card {
  background: var(--card-bg);
  padding: 30px;
  border-radius: 20px;
  width: 80%;
  max-width: 320px;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}

.loader-card h2 {
  margin-bottom: 20px;
  color: var(--primary);
}

.progress-box {
  width: 100%;
  height: 14px;
  background: #334155;
  border-radius: 10px;
  overflow: hidden;
}

#progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--primary), var(--accent));
  transition: width 0.1s linear;
}

#progress-text {
  margin-top: 10px;
  font-weight: bold;
  color: var(--accent);
}

.brand {
  margin-top: 20px;
  font-size: 0.9rem;
  opacity: 0.8;
}

@media (max-width: 400px) {
  h1 { font-size: 2.2rem; }
  .cell { font-size: 2rem; }
  #setup-area, #game-area { padding: 15px; }
}

  </style>
</head>
<body>
    <div id="loader">
  <div class="loader-card">
    <h2>Loading Game...</h2>
    <div class="progress-box">
      <div id="progress-bar"></div>
    </div>
    <div id="progress-text">0%</div>
    <p class="brand">Made by AR Network House</p>
  </div>
</div>


  <h1>Tic-Tac-Toe</h1>

  <div id="setup-area">
    <div id="mode-selection">
      <h2 style="color: var(--primary);">Choose Mode</h2>
      <div id="ai-modes" style="display:none;">
  <button onclick="selectAI('aran')">ARAN (EXPERT)</button>
  <button onclick="selectAI('void')">VOID (CASUAL)</button>
  <button onclick="selectAI('torpid')">TORPID (BEGINNER)</button>

</div>

      <button onclick="showAIModes()">Play AI</button>
      <button onclick="showNameInputs('multi')">2 Players (Duo)</button>
    </div>

    <div id="name-inputs" style="display:none; margin-top: 20px;">
      <div class="input-group" id="p1-group">
        <label id="p1-label">Player 1 Name:</label>
        <input type="text" id="p1-name" placeholder="Write your name...">
      </div>
      <div class="input-group" id="p2-group">
        <label>Player 2 Name:</label>
        <input type="text" id="p2-name" placeholder="Write your name...">
      </div>
      <button onclick="startGame()">Start Game!</button>
    </div>
  </div>

  <div id="winner-display"></div>

  <div id="game-area" style="display:none;">
    <div id="status">Player X's turn</div>
    <div id="player-bar">
  <div id="player-left" class="player-box"></div>
  <div id="player-right" class="player-box"></div>
</div>

    <div id="board"></div>
    <button onclick="playAgain()">Play Again</button>
    <button id="reset" onclick="resetToHome()">Home</button>
  </div>

  <script>
    const setupArea = document.getElementById('setup-area');
    const loader = document.getElementById('loader');
const progressBar = document.getElementById('progress-bar');
const progressText = document.getElementById('progress-text');

let progress = 0;
let loaderInterval = setInterval(() => {
  progress++;
  progressBar.style.width = progress + "%";
  progressText.textContent = progress + "%";

  if (progress >= 100) {
    clearInterval(loaderInterval);
    setTimeout(() => {
      loader.style.display = 'none';
    }, 300);
  }
}, 50); 

    const nameInputs = document.getElementById('name-inputs');
    const gameArea = document.getElementById('game-area');
    const boardElement = document.getElementById('board');
    const status = document.getElementById('status');
    const winnerDisplay = document.getElementById('winner-display');

    let currentPlayer = 'X';
    let cells = Array(9).fill(null);
    let gameOver = false;
    let gameMode = ''; 
    let aiLevel = 'aran'; 
    let player1 = "Player 1";
    let player2 = "ARAN";

    const winPatterns = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

    function getWinningPattern(boardState) {
  for (let pattern of winPatterns) {
    const [a, b, c] = pattern;
    if (
      boardState[a] &&
      boardState[a] === boardState[b] &&
      boardState[a] === boardState[c]
    ) {
      return pattern;
    }
  }
  return null;
}

   function showAIModes() {
  const modeSelection = document.getElementById('mode-selection');
  document.getElementById('ai-modes').style.display = 'block';
  modeSelection.children[2].style.display = 'none';
  modeSelection.children[3].style.display = 'none';
}


function selectAI(level) {
  aiLevel = level;
  showNameInputs('single');
}

    function showNameInputs(mode) {
      gameMode = mode;
      document.getElementById('mode-selection').style.display = 'none';
      nameInputs.style.display = 'block';
      
      if (mode === 'single') {
        document.getElementById('p2-group').style.display = 'none';
        document.getElementById('p1-label').textContent = "Give Your Name:";
      } else {
        document.getElementById('p2-group').style.display = 'block';
        document.getElementById('p1-label').textContent = "Player 1 Name:";
      }
    }

    function startGame() {
      const p1 = document.getElementById('p1-name').value.trim();
      const p2 = document.getElementById('p2-name').value.trim();
      
      player1 = p1 || "Player 1";
      if (gameMode === 'single') {
  if (aiLevel === 'aran') player2 = "ARAN";
  else if (aiLevel === 'void') player2 = "VOID";
  else player2 = "TORPID";
} else {
  player2 = p2 || "Player 2";
}


      setupArea.style.display = 'none';
      gameArea.style.display = 'block';
      document.getElementById('player-left').textContent = player1;
      document.getElementById('player-right').textContent = player2;
      resetGame();
    }

    function checkWinner(boardState) {
      for (let pattern of winPatterns) {
        const [a, b, c] = pattern;
        if (boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]) return boardState[a];
      }
      return boardState.includes(null) ? null : 'Draw';
    }

    function handleClick(index) {
  if (cells[index] || gameOver) return;

  cells[index] = currentPlayer;
  render();

  const cellDiv = boardElement.children[index];
  if (cellDiv) {
    cellDiv.classList.add('flash');
    setTimeout(() => cellDiv.classList.remove('flash'), 350);
  }

  let result = checkWinner(cells);
  if (result) {
    endGame(result);
  } else {
    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
    let nextName = currentPlayer === 'X' ? player1 : player2;
    status.textContent = `${nextName}'s turn (${currentPlayer})`;
    document.getElementById('player-left').style.opacity = currentPlayer === 'X' ? '1' : '0.4';
    document.getElementById('player-right').style.opacity = currentPlayer === 'O' ? '1' : '0.4';


    if (gameMode === 'single' && currentPlayer === 'O' && !gameOver) {
      setTimeout(() => {
        if (aiLevel === 'aran') aiMove();
        else if (aiLevel === 'void') voidAIMove();
        else torpidAIMove();
      }, 600);
    }
  }
}


function aiMove() {

  let emptyCells = cells
    .map((v, i) => v === null ? i : null)
    .filter(v => v !== null);

  for (let i of emptyCells) {
    cells[i] = 'O';
    if (checkWinner(cells) === 'O') {
      cells[i] = null;
      handleClick(i);
      return;
    }
    cells[i] = null;
  }

  for (let i of emptyCells) {
    cells[i] = 'X';
    if (checkWinner(cells) === 'X') {
      cells[i] = null;
      handleClick(i);
      return;
    }
    cells[i] = null;
  }

  if (cells[4] === null) {
    handleClick(4);
    return;
  }

  const corners = [0, 2, 6, 8].filter(i => cells[i] === null);
  if (corners.length) {
    handleClick(corners[Math.floor(Math.random() * corners.length)]);
    return;
  }

  let bestScore = -Infinity;
  let move;

  for (let i of emptyCells) {
    cells[i] = 'O';
    let score = minimax(cells, 0, -Infinity, Infinity, false);
    cells[i] = null;

    if (score > bestScore) {
      bestScore = score;
      move = i;
    }
  }

  handleClick(move);
}


function voidAIMove() {
  let emptyCells = cells
    .map((v, i) => v === null ? i : null)
    .filter(v => v !== null);

  if (Math.random() < 0.4) {
    handleClick(emptyCells[Math.floor(Math.random() * emptyCells.length)]);
    return;
  }

  let bestScore = -Infinity;
  let move;

  for (let i of emptyCells) {
    cells[i] = 'O';
    let score = minimax(cells, 0, -5, 5, false);
    cells[i] = null;

    if (score > bestScore) {
      bestScore = score;
      move = i;
    }
  }

  handleClick(move ?? emptyCells[0]);
}
function torpidAIMove() {
  let emptyCells = cells
    .map((v, i) => v === null ? i : null)
    .filter(v => v !== null);

  let randomMove = emptyCells[Math.floor(Math.random() * emptyCells.length)];
  handleClick(randomMove);
}


function minimax(boardState, depth, alpha, beta, isMaximizing) {
  let result = checkWinner(boardState);

  if (result === 'O') return 10 - depth;
  if (result === 'X') return depth - 10;
  if (result === 'Draw') return 0;

  if (isMaximizing) {
    let maxEval = -Infinity;
    for (let i = 0; i < 9; i++) {
      if (boardState[i] === null) {
        boardState[i] = 'O';
        let eval = minimax(boardState, depth + 1, alpha, beta, false);
        boardState[i] = null;
        maxEval = Math.max(maxEval, eval);
        alpha = Math.max(alpha, eval);
        if (beta <= alpha) break;
      }
    }
    return maxEval;
  } else {
    let minEval = Infinity;
    for (let i = 0; i < 9; i++) {
      if (boardState[i] === null) {
        boardState[i] = 'X';
        let eval = minimax(boardState, depth + 1, alpha, beta, true);
        boardState[i] = null;
        minEval = Math.min(minEval, eval);
        beta = Math.min(beta, eval);
        if (beta <= alpha) break;
      }
    }
    return minEval;
  }
}

    function endGame(winner) {
const winPattern = getWinningPattern(cells);
if (winPattern) {
  winPattern.forEach(i => {
    const cellDiv = boardElement.children[i];
    if (cellDiv) {
      cellDiv.classList.remove('flash');
      cellDiv.classList.add('win');
    }
  });
}

      gameOver = true;
      winnerDisplay.style.display = 'block';
      if (winner === 'Draw') {
        winnerDisplay.textContent = "It's a Draw! ðŸ¤";
      } else {
        let winnerName = (winner === 'X') ? player1 : player2;
        winnerDisplay.textContent = `ðŸŽ‰ ${winnerName} Wins! ðŸŽ‰`;
      }
      status.textContent = "Game Over!";
    }

    function render() {
      boardElement.innerHTML = '';
      cells.forEach((cell, i) => {
        const div = document.createElement('div');
        div.className = `cell ${cell ? cell.toLowerCase() : ''}`;
        div.textContent = cell;
        div.addEventListener('click', () => handleClick(i));
        boardElement.appendChild(div);
      });
    }

    function resetGame() {
      cells = Array(9).fill(null);
      currentPlayer = 'X';
      gameOver = false;
      winnerDisplay.style.display = 'none';
      status.textContent = `${player1}'s turn (X)`;
      document.querySelectorAll('.cell').forEach(c => {
  c.classList.remove('win', 'flash');
});

      render();
    }
    function playAgain() {
      cells = Array(9).fill(null);
      currentPlayer = 'X';
      gameOver = false;
      winnerDisplay.style.display = 'none';
      status.textContent = `${player1}'s turn (X)`;
      render();
}

    function resetToHome() {
  gameArea.style.display = 'none';
  winnerDisplay.style.display = 'none';
  setupArea.style.display = 'block';
  document.getElementById('mode-selection').style.display = 'block';
  document.getElementById('ai-modes').style.display = 'none';
const modeSelection = document.getElementById('mode-selection');
modeSelection.children[2].style.display = 'inline-block';
modeSelection.children[3].style.display = 'inline-block';
  nameInputs.style.display = 'none';
  document.getElementById('p2-group').style.display = 'block';
  document.getElementById('p1-label').textContent = 'Player 1 Name:';
  document.getElementById('p1-name').value = '';
  document.getElementById('p2-name').value = '';
  gameMode = '';
  aiLevel = 'aran';
  player1 = 'Player 1';
  player2 = 'ARAN';
}

  </script>
</body>
</html>
